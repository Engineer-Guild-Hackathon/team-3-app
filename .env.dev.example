# 開発者ローカル専用の秘密・上書き設定（GitHub にコミットしない）
# 実際に使うときは、このファイルをコピーして `.env.dev` を作成してください。


##############################
# フロントエンド
##############################

# NextAuth v4（必須）
NEXTAUTH_SECRET=
NEXTAUTH_URL=

# Auth.js v5 互換（将来移行時の参考）
# AUTH_SECRET=
# AUTH_URL=
# AUTH_TRUST_HOST=true

# Google OAuth クライアント（Cloud Console で取得）
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# 任意: 許可するメールドメイン（例: school.ac.jp）
# 未設定の場合は全ドメイン許可
ALLOWED_EMAIL_DOMAIN=

# 任意: 許可するメールアドレス（カンマ区切り）
# 設定されている場合、こちらが最優先で適用されます。
# 例: dev1@example.com,dev2@example.com
ALLOWED_EMAILS=


##############################
# バックエンド
##############################

# ログレベル
LOG_LEVEL=info

# Azure OpenAI（必須）
AZURE_TENANT_ID=<tenant-id>
AZURE_CLIENT_ID=<app-reg-client-id>
AZURE_CLIENT_SECRET=<client-secret>
AZURE_CONTENT_SAFETY_ENDPOINT=https://<your-content-safety-resource>.cognitiveservices.azure.com

##############################
# Mobile BFF Auth (OIDC + JWT)
##############################

# OIDC metadata
BFF_OIDC_AUTHORIZATION_ENDPOINT=https://login.example.com/oauth2/v2.0/authorize
BFF_OIDC_TOKEN_ENDPOINT=https://login.example.com/oauth2/v2.0/token
BFF_OIDC_CLIENT_ID=<oidc-client-id>
BFF_OIDC_CLIENT_SECRET=<oidc-client-secret>
BFF_OIDC_REDIRECT_URI=spar://auth/callback
BFF_OIDC_SCOPE=openid profile email

# Dev mode: allow dev:email codes
BFF_AUTH_DEV_MODE=1

# AppJWT
BFF_APP_JWT_SECRET=<bff-dev-secret>
BFF_APP_JWT_ISSUER=https://api.stg.example.com
BFF_APP_JWT_AUDIENCE=spar-mobile
BFF_APP_JWT_ACCESS_TTL=900
BFF_APP_JWT_REFRESH_TTL=2592000


##############################
# データベース（Dev, Docker Compose）
##############################

# PostgreSQL 17 (docker-compose.dev.yml の db サービスと一致させる)
POSTGRES_USER=dev
POSTGRES_PASSWORD=devpass
POSTGRES_DB=team3app_dev

# Web(Next.js) → DB 接続文字列（Docker ネットワーク内はホスト名 db）
DATABASE_URL=postgres://dev:devpass@db:5432/team3app_dev?sslmode=disable
